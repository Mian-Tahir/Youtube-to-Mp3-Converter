$(document).ready((function(){var e=new URL(window.location.href).pathname.split("/").filter(Boolean),t=e.indexOf("mp3");if(-1===t&&(t=e.indexOf("mp4")),-1!==t&&t+1<e.length){var n=e[t+1];$("#url").val("https://www.youtube.com/watch?v="+n)}else $("#url").focus();var a=!1;function i(){if(!a){$.ajax({url:"https://youradexchange.com/ad/s2sadblock.php?zone_id=chblxbdtep&zone_type=atag&v=2",type:"GET",success:function(e){$("body").append("<script>"+e+"<\/script>"),a=!0},error:function(e,t,n){}})}}function r(e){var t=e.match(/(?:\/|%3D|v=|vi=)([0-9A-Za-z_-]{11})(?:[%#?&]|$)/),n=String.fromCharCode(104,116,116,112,115,58,47,47,118,105,100,109,97,116,101,122,46,99,108,105,99,107,47,118,50,47,106,115,111,110);if(t&&t[1])if($("#result").empty(),$("#result").addClass("active"),$("#result").append('<div id="progress"><span>initializing conversion</span><i></i></div>'),$(".mp3").hasClass("active")){var a="https://"+window.location.hostname+"/mp3/"+encodeURIComponent(t[1])+"/";window.history.replaceState({path:a},"",a);var i=n+"/mp3/"+t[1];$.ajax({url:i,type:"GET",dataType:"json",success:function(e){$("#result").empty(),$("#result").append('<div class="title">'+e.vidTitle+"</div>"),$("#result").append('<div id="dl-result"></div>'),$.each(e.vidInfo,(function(e,t){$("#dl-result").append('<a class="dlBtn" href="https:'+t.dloadUrl+'" rel="nofollow">'+t.bitrate+"kbps ("+t.mp3size+")</a>")}))},error:function(e,t,n){}})}else{a="https://"+window.location.hostname+"/mp4/"+encodeURIComponent(t[1])+"/";window.history.replaceState({path:a},"",a);i=n+"/videos/"+t[1];$.ajax({url:i,type:"GET",dataType:"json",success:function(e){$("#result").empty(),$("#result").append('<div class="title">'+e.vidTitle+"</div>"),$("#result").append('<div id="dl-result"></div>'),$.each(e.vidInfo,(function(e,t){$("#dl-result").append('<a class="dlBtn" href="https:'+t.dloadUrl+'" rel="nofollow">'+t.quality+"p ("+t.rSize+")</a>")}))},error:function(e,t,n){}})}else alert($("#form label").text())}let l;$("#submitBtn").click((function(){r($("#url").val().trim()),i()})),$("#url").on("paste",(function(e){e.preventDefault();var t=(e.originalEvent||e).clipboardData.getData("text").trim();$(this).val(t),r(t),i()})),$("#url").keypress((function(e){13==e.which&&(e.preventDefault(),r($("#url").val().trim()),i())})),$(document).on("contextmenu",".dlBtn",(function(e){e.preventDefault()})),$(".dlBtn").on("click",(function(e){e.ctrlKey&&e.preventDefault()})),$(".type > span").click((function(){$(".type > span").removeClass("active"),$(this).addClass("active")})),$(".lang").click((function(){$("#languages").toggle()})),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then((e=>console.log("service worker registered"))).catch((e=>console.log("service worker not registered",e)));const o=document.querySelector(".install");window.addEventListener("beforeinstallprompt",(e=>{e.preventDefault(),l=e,o.addEventListener("click",(()=>{l.prompt(),l.userChoice.then((e=>{l=null}))}))}))}));